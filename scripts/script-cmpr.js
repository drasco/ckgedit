function HTMLParser_test_result(e){var t="";for(i=0;i<e.length;i++){var n=e.charAt(i);10==e.charCodeAt(i)&&(n="\\n"),32==e.charCodeAt(i)&&(n="SP"),t+=n+" ",10==e.charCodeAt(i)&&(t+="\n")}return!!confirm(t)}function hide_backup_msg(){return document.getElementById("backup_msg").style.display="none",!1}function show_backup_msg(e){return document.getElementById("backup_msg").style.display="block",document.getElementById("backup_msg_area").innerHTML="Backed up to: "+e,!1}function remove_draft(){}function dwedit_draft_delete(){}function setEdHeight(e){e=parseInt(e),document.cookie="ckgEdht="+e+';expires="";path='+JSINFO.doku_base}function ckgd_setImgPaste(e){e="on"==(JSINFO.ckgEdPaste?JSINFO.ckgEdPaste:"")?"off":"on",JSINFO.ckgEdPaste=e,document.cookie="ckgEdPaste="+e+';expires="Thu, 18 Dec 2575 12:00:00 UTC";path='+JSINFO.doku_base,alert(LANG.plugins.ckgedit.ckg_paste_restart+" "+LANG.plugins.ckgedit[e])}function GetE(e){return document.getElementById(e)}!function(){var e=/^<(\w+)((?:\s+[\w\-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,t=/^<\/(\w+)[^>]*>/,n=/(\w+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,i=l("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),a=l("address,applet,blockquote,button,center,dd,del,dir,div,dl,dt,fieldset,form,frameset,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,p,pre,script,table,tbody,td,tfoot,th,thead,tr,ul"),r=l("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),c=l("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),o=l("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),s=l("script,style");this.HTMLParser=function(l,d){var u,p,g,m=[],_=l;for(l=l.replace(/~~OPEN_HTML_BLOCK~~/gm,"~~START_HTML_BLOCK~~"),(l=l.replace(/~~END_HTML_BLOCK~~/gm,"~~CLOSE_HTML_BLOCK~~")).match(/~~START_HTML_BLOCK~~/gm)&&(JSINFO.htmlok||(l=l.replace(/~~START_HTML_BLOCK~~|~~CLOSE_HTML_BLOCK~~/gm,"")),l=l.replace(/(<p.*?>)*\s*~~START_HTML_BLOCK~~\s*(<\/p>)*([\s\S]+)~~CLOSE_HTML_BLOCK~~\s*(<\/p>)*/gm,function(e,t,n,i,a){return"~~START_HTML_BLOCK~~\n\n"+(i=(i=(i=(i=(i=i.replace(/<\/?div.*?>/gm,"")).replace(/<code>/gm,"")).replace(/<\/code>/gm,"")).replace(/</gm,"&lt;")).replace(/<\//gm,"&gt;"))+"\n\n~~CLOSE_HTML_BLOCK~~\n\n"})),l=l.replace(/(<sup\s+class=\"dwfcknote fckgL\d+\"\>fckgL\d+\s*\<\/sup\>)\<\/a\>/gm,function(e,t,n){return"</a>"+t}),m.last=function(){return this[this.length-1]};l;){if(p=!0,m.last()&&s[m.last()])l=l.replace(new RegExp("(.*)</"+m.last()+"[^>]*>","i"),function(e,t){return t=t.replace(/<!--(.*?)-->/g,"$1").replace(/<!\[CDATA\[(.*?)]]>/g,"$1"),d.chars&&d.chars(t),""}),h("",m.last());else if(0==l.toLowerCase().indexOf("<!doctype")?(u=l.indexOf(">"))>=0&&(d.comment&&d.comment(l.substring(2,u)),l=l.substring(u+1),p=!1):0==l.indexOf("\x3c!--")?(u=l.indexOf("--\x3e"))>=0&&(d.comment&&d.comment(l.substring(4,u)),l=l.substring(u+3),p=!1):0==l.indexOf("</")?(g=l.match(t))&&(l=l.substring(g[0].length),g[0].replace(t,h),p=!1):0==l.indexOf("<")&&(g=l.match(e))&&(l=l.substring(g[0].length),g[0].replace(e,k),p=!1),p){var f=(u=l.indexOf("<"))<0?l:l.substring(0,u);l=u<0?"":l.substring(u),d.chars&&d.chars(f)}if(l==_)throw"Parse Error: "+l;_=l}function k(e,t,s,l){if(t=t.toLowerCase(),a[t])for(;m.last()&&r[m.last()];)h("",m.last());if(c[t]&&m.last()==t&&h("",t),(l=i[t]||!!l)||m.push(t),d.start){var u=[];s.replace(n,function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:o[t]?t:"";u.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),d.start&&d.start(t,u,l)}}function h(e,t){if(t)t=t.toLowerCase();else var n=0;for(n=m.length-1;n>=0&&m[n]!=t;n--);if(n>=0){for(var i=m.length-1;i>=n;i--)d.end&&d.end(m[i]);m.length=n}}h()};function l(e){for(var t={},n=e.split(","),i=0;i<n.length;i++)t[n[i]]=!0;return t}}();var dokuBase=location.host+DOKU_BASE;if(void 0!=window.getSelection){var doku_ckg_getSelection=window.getSelection;window.getSelection=function(e){return e||(e=GetE("wiki__text")),doku_ckg_getSelection(e)}}function ckgedit_seteditor_priority(e,t,n){var i={Y:"Dokuwiki",N:"CKEditor"};void 0===e&&(n[0].checked?e=n[0].value:n[1].checked&&(e=n[1].value));var a="dw_val="+e;a+="&call=cked_selector",a+="&dwp_client="+t,jQuery.post(DOKU_BASE+"lib/exe/ajax.php",a,function(t){"done"==t?e?alert(LANG.plugins.ckgedit.dwp_updated+i[e]):alert(LANG.plugins.ckgedit.dwp_not_sel):alert(LANG.plugins.ckgedit.dwp_save_err+t)},"html")}function ckged_get_unlink_size(e){var t="call=cked_deletedsize";t+="&cked_delid="+e,jQuery.post(DOKU_BASE+"lib/exe/ajax.php",t,function(e){e&&(JSINFO.ckg_del_sz=e)},"html")}function ckged_setmedia(e,t,n){var i="call=cked_upload";i+="&ckedupl_id="+e,t&&(i+="&ckedupl_del=D&delsize="+JSINFO.ckg_del_sz),jQuery.post(DOKU_BASE+"lib/exe/ajax.php",i,function(e){e&&(n&&n.postMessage(JSINFO.doku_url,JSINFO.doku_url),console.log(e))},"html")}function ckg_edit_mediaman_insert(e,t,n,i){var a,r,c,o=n.substring(1).split("&");a="detail";for(var s in o){var l=o[s];l.match(/^\d+$/)?r=l:l.match(/^\w+$/)&&(a=l)}switch(i){case"2":c="medialeft";break;case"3":c="mediacenter";break;case"4":c="mediaright";break;default:c=""}var d=CKEDITOR.instances.wiki__text._.filebrowserFn,u=DOKU_BASE+"lib/exe/fetch.php?media="+t;CKEDITOR.tools.callFunction(d,u,function(){var e=this.getDialog();"image"==e.getName()&&(null!=c&&e.getContentElement("info","cmbAlign").setValue(c),null!=a&&e.getContentElement("info","cmbLinkType").setValue(a),null!=r&&(e.getContentElement("info","txtWidth").setValue(r),e.dontResetSize=!0))})}function ckg_edit_mediaman_insertlink(e,t,n,i){var a=CKEDITOR.instances.wiki__text._.filebrowserFn;CKEDITOR.tools.callFunction(a,t,function(){var e=this.getDialog();"link"==e.getName()&&e.getContentElement("info","media").setValue(t)})}function getCookie(e){var t=new RegExp(e+"=([^;]+)").exec(document.cookie);return null!=t?unescape(t[1]):null}jQuery(document).ready(function(){"hide"==JSINFO.hide_captcha_error&&jQuery("div.error").hide()}),jQuery(document).ready(function(){jQuery("#editor_height").keydown(function(e){13==e.which&&e.preventDefault()}),$dokuWiki=jQuery(".dokuwiki"),jQuery(".editbutton_table button").click(function(){var e=this.form;jQuery("<input />").attr("type","hidden").attr("name","mode").attr("value","dwiki").appendTo(jQuery(e)),jQuery("<input />").attr("type","hidden").attr("name","fck_preview_mode").attr("value","nil").appendTo(jQuery(e))}),JSINFO.dbl_click_auth,""!=JSINFO.dbl_click_auth&&JSINFO.ckg_dbl_click&&(jQuery(".editbutton_section",$dokuWiki).length>0&&jQuery('[class^="sectionedit"], div[class^="level"]',$dokuWiki).dblclick(function(){var e=jQuery(this).nextAll(".editbutton_section:eq(0)").children("form:eq(0)");jQuery("<input />").attr("type","hidden").attr("name","mode").attr("value","dwiki").appendTo(jQuery(e)),jQuery("<input />").attr("type","hidden").attr("name","fck_preview_mode").attr("value","nil").appendTo(jQuery(e)),e.submit()}),JSINFO.ckg_template.match(/bootstrap/)&&jQuery("div.editButtons").length>0&&jQuery("div.editButtons input").each(function(e){jQuery(this).hasClass("btn-success")&&jQuery(this).removeClass("btn-success"),jQuery(this).hasClass("btn-danger")&&jQuery(this).removeClass("btn-danger")}))});